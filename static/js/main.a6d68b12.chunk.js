(window.webpackJsonpnews=window.webpackJsonpnews||[]).push([[0],{170:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(108),r=n.n(a),o=n(152),c=n(45);function l(e){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=t.params,e.next=3,c.a.post(n,a);case 3:return e.sent,e.abrupt("return",{type:"getUserList"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},173:function(e,t,n){e.exports=n(342)},178:function(e,t,n){},179:function(e,t,n){},201:function(e,t,n){},332:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),c=n.n(o),l=(n(178),n(179),n(40)),i=n(41),s=n(43),u=n(42),m=n(44),p=n(345),d=n(347),f=n(346),h=n(344),g=(n(163),n(113)),b=n(142),v=n.n(b),y=function(){return r.a.createElement("div",null,r.a.createElement(g.a,{size:"large",style:{position:"fixed",left:"0",right:"0",top:"48%",bottom:"0",margin:"auto"}}))},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return v()({loader:e,loading:t})},O=(n(109),n(35)),j=(n(171),n(52)),w=(n(155),n(82)),x=(n(165),n(12)),k=(n(201),n(45)),S=60,C=null,P=/^1(3|5|7|8|9)\d{9}$/,N=/^\d{4}$/,D=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).receiveCode=function(){P.test(e.phone.state.value)&&(C=setInterval((function(){e.state.num>0?(e.state.num--,e.setState({num:e.state.num,txt:"\u8fd8\u5269 "+e.state.num+" S",loginFlag:!1})):(e.setState({num:S,txt:"\u83b7\u53d6\u9a8c\u8bc1\u7801",loginFlag:!0}),clearInterval(C))}),1e3),k.a.post("/react/sendCode",{phone:e.phone.state.value}).then((function(e){localStorage.username=e.data.username})))},e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields((function(e,t){e||k.a.post("/react/checkCode",{phone:t.phone,code:t.code}).then((function(e){e.data.type?(k.b.push("/home"),localStorage._id=e.data._id,localStorage.token=e.data.token,localStorage.phone=t.phone):(localStorage._id="",localStorage.token="",localStorage.phone=""),console.log(e)}))}))},e.state={loginFlag:!0,txt:"\u83b7\u53d6\u9a8c\u8bc1\u7801",num:S,size:"small"},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.size,a=t.txt,o=t.loginFlag,c=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login_a"},r.a.createElement("h2",{style:{color:"#fff",textAlign:"center",fontSize:"40px",marginTop:"-100px"}},"\u6210\u7ee9\u7ba1\u7406\u7cfb\u7edf"),r.a.createElement("br",null),r.a.createElement(j.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(j.a.Item,null,c("phone",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7!!!"},{pattern:new RegExp(P),message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",ref:function(t){return e.phone=t}}))),r.a.createElement(j.a.Item,null,c("code",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u9a8c\u8bc1\u7801!!!"},{pattern:new RegExp(N),message:"\u4e0d\u8d85\u8fc74\u4e2a\u5b57\u7b26"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(x.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"\u9a8c\u8bc1\u7801"}))),r.a.createElement(j.a.Item,null,r.a.createElement(O.a,{type:"primary",htmlType:"submit",style:{marginLeft:"40%"},className:"login-form-button"},"\u767b \u9646"),r.a.createElement(O.a,{onClick:this.receiveCode,disabled:!o,className:"getCode",size:n},a)))))}}]),t}(r.a.Component),F=j.a.create({name:"my_login"})(D),I=n(1),z=n.n(I),J=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getChildContext",value:function(){return{history:this.props.history}}},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement(f.a,null,r.a.createElement(d.a,{path:"/",exact:!0,render:function(){return r.a.createElement(h.a,{to:"/login"})}}),r.a.createElement(d.a,{path:"/login",component:F}),r.a.createElement(d.a,{path:"/home",component:E((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,666))}))}),">",r.a.createElement(d.a,{render:function(){return r.a.createElement(h.a,{to:"/index/home"})}})))}}]),t}(a.Component);J.childContextTypes={history:z.a.object};var T=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{basename:"/"},r.a.createElement(d.a,{component:J}))}}]),t}(a.Component);var _=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(332);var L=n(141),R=n(59),q=n(151),U=n(140),$=n(36);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=$.default.fromJS({token:"",phone:"",email:"",mintor:"",uid:"",username:""}),M=(n(170),$.default.Map({})),G=Object(q.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getUserList":var n=e.toJS();return $.default.fromJS(B({},n,{},t.user));default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),H=n(153),K=n(154),Q=n.n(K),V=Object(R.c)(G,Object(R.a)(H.a,Q.a));c.a.render(r.a.createElement(L.a,{store:V},r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},45:function(e,t,n){"use strict";n(144),n(158);var a=n(76),r=n(37),o=n.n(r),c=new(n(29).a);o.a.defaults.baseURL="http://47.94.46.114:1996/";o.a.defaults.headers.common.token="",o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";o.a.interceptors.request.use((function(e){var t;return t="\u8d44\u6e90\u52a0\u8f7d\u4e2d",a.a.warning(t),e.headers.token=localStorage.token,console.log(e),e}),(function(e){return e("\u8bf7\u6c42\u5931\u8d25"),Promise.reject(e)})),o.a.interceptors.response.use((function(e){return console.log(e),setTimeout((function(){var t;200==e.data.code?(t=e.data.msg,a.a.success(t)):404==e.data.code&&function(e){a.a.error(e)}(e.data.msg)}),500),e}),(function(e){return e("\u54cd\u5e94\u5931\u8d25"),Promise.reject(e)})),n.d(t,"a",(function(){return o.a})),n.d(t,"b",(function(){return c}))}},[[173,1,2]]]);
//# sourceMappingURL=main.a6d68b12.chunk.js.map